name: submit_run
description: Submits a Databricks Run
inputs:
  - {name: run_name,       type: String,      description: ''}
  - {name: new_cluster,    type: JsonObject,  description: ''}
  - {name: libraries,      type: JsonObject,  description: ''}
  - {name: spark_jar_task, type: JsonObject,  description: ''}
outputs:
  - {name: run_id,         type: String,  description: ''}
implementation:
  container:
    image: alejacma/databricks_submit_run@sha256:af5ea9a5f9c3d78e8809e9b5bf7ea0c59b55c5ec44c45cec9b702d05062e2b46
    command: [
      python3, /pipelines/component/src/program.py,
      --run_name,       {inputValue: run_name},
      --new_cluster,    {inputValue: new_cluster},
      --libraries,      {inputValue: libraries},
      --spark_jar_task, {inputValue: spark_jar_task}
    ]
    fileOutputs:
      run_id: /run_id